<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Fuseprop Log In</title>

  <link rel="stylesheet" href="css/styles.css">
  <script src="js/js.cookie.min.js"></script>
  <script src="js/authentication.js"></script>
</head>
<body>
<div class="fp fp-login__bg">
  <div class="fp-login">
    <img src="img/fp-login-logo.png" alt="">

    <h2>
      Platform Demo
    </h2>

    <div class="fp-form">
      <h3>
        Type password to unlock access
      </h3>

      <!--   need to add class "incorrect" for error styles   -->
      <label for="password"></label>
      <input type="password" placeholder="Password" minlength="1" id="password" required class="">

      <h5>Incorrect Password. Please try again</h5>

      <!--   correct password, add class - correct   -->
      <button type="submit" onclick="signIn()" id="submit" class="submit" disabled>
        UNLOCK ACCESS
      </button>
    </div>

    <h6>Â©Fuseprop 2023. All rights reserved.</h6>
  </div>
</div>

<script>
    const pswdInput = document.querySelector('#password');
    const submitBtn = document.querySelector('#submit');

    pswdInput.addEventListener('input', (e) => {
        pswdInput.classList.remove('incorrect');

        if (e.target.value.length >= 1) {
            submitBtn.classList.add('correct');
            submitBtn.disabled = false;
        } else {
            submitBtn.classList.remove('correct');
            submitBtn.disabled = true;
        }
    })

    const signIn = () => {
        if (pswdInput.value === 'FP202$') {
            Cookies.set('logged', 'true', { expires: 7 });
            window.location.href = 'pages/home.html'
        } else {
            pswdInput.classList.add('incorrect');
        }
    }

    pswdInput.addEventListener('keyup', function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            signIn();
        }
    });
</script>
</body>
</html>
